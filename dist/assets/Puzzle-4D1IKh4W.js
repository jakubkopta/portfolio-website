import{r as o,j as t,b as E,I as R}from"./index-2PZXGpzs.js";import{V as y}from"./index-UfJdFPpB.js";const C=({isStarted:u,checkWinner:f,stoppedTime:n,setStoppedTime:l,highestScore:a,setHighestScore:j})=>{const[i,b]=o.useState(0),[h,x]=o.useState(!1),d=o.useRef(),c=m=>{const p=Math.floor(m/1e3),v=Math.floor(p/60),g=p%60,N=Math.floor(m%1e3/10);return`${v.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}:${N.toString().padStart(2,"0")}`};return o.useEffect(()=>{u&&!f?(()=>{if(!h){const g=Date.now()-i;d.current=window.setInterval(()=>{b(Date.now()-g)},10),x(!0)}})():u&&f?(()=>{x(!1),clearInterval(d.current),l(c(i)),(parseInt(a.replace(/:/g,""))===0||parseInt(n.replace(/:/g,""))<parseInt(a.replace(/:/g,"")))&&j(n)})():(()=>{clearInterval(d.current),b(0),x(!1)})()},[u,f,h,i,l,n,a,j]),t.jsx("div",{children:t.jsx("h1",{children:c(i)})})},P=({handlePlayClose:u,isDarkMode:f})=>{const[n,l]=o.useState(["","1","2","3","4","5","6","7","8"]),[a,j]=o.useState("0"),[i,b]=o.useState(a),[h,x]=o.useState(!1),[d,c]=o.useState(!1),m=[[1,3],[0,2,4],[1,5],[0,4,6],[1,3,5,7],[2,4,8],[3,7],[4,6,8],[5,7]],p=(e,s)=>{const r=[...n];return[r[e],r[s]]=[r[s],r[e]],r};function v(e){return e.filter((s,r)=>s!==""&&parseInt(s)!==r).length}function g(e){for(let s=0;s<e.length-1;s++)if(parseInt(e[s])+1===parseInt(e[s+1]))return!0;return!1}function N(e){const s=[...e];do for(let r=0;r<e.length;r++){const S=e.indexOf(""),I=m[S],w=I[Math.floor(Math.random()*I.length)];[e[S],e[w]]=[e[w],e[S]]}while(e.join()===["","1","2","3","4","5","6","7","8"].join()||e.join()===s.join()||v(e)<e.length/2||g(e));return e}const k=()=>{const e=N(n);l(e),c(!1),x(!h)},$=e=>{for(const s of m[e])n[s]===""&&l(p(e,s))},z=()=>{if(n.every((e,s)=>e===["","1","2","3","4","5","6","7","8"][s]))return!0};return o.useEffect(()=>{},[n,h]),t.jsxs("div",{className:`${f?"bg-dark-mode":"bg-gray-200"} shadow-2xl rounded-3xl m-1 mt-5 md:m-28 pb-10 relative`,children:[t.jsxs("div",{className:"flex flex-col justify-center items-center",children:[t.jsx("h1",{className:"text-4xl font-bold text-center m-5",children:"Puzzle"}),t.jsx(C,{isStarted:d,checkWinner:z(),stoppedTime:a,setStoppedTime:j,highestScore:i,setHighestScore:b})]}),t.jsxs("h2",{className:"absolute top-3 left-3 text-center",children:["Highest Score:",t.jsx("br",{}),i]}),t.jsx("div",{className:"flex justify-evenly items-center",children:t.jsx("div",{className:"grid grid-cols-3 m-5",children:n.map((e,s)=>t.jsx("div",{onClick:()=>{$(s),console.log(s)},className:"bg-gray-400 h-28 md:h-32 w-28 md:w-32 rounded-lg cursor-pointer flex justify-center items-center overflow-hidden",children:t.jsx("div",{className:`puzzle-piece puzzle-piece-${e} ${e===""&&"hidden"} duration-300`})},s))})}),t.jsxs("div",{className:`${z()&&d?"scale-100 opacity-100":"scale-0 opacity-0"} duration-500 ${f?"bg-dark-mode/90":"bg-gray-200/90"} rounded-3xl flex flex-col justify-center items-center text-center absolute inset-0 z-[100]`,children:[t.jsx("span",{className:"text-6xl font-bold p-3",children:"Winner"}),"Your Time: ",a,t.jsx("br",{}),"Highest Score: ",i,t.jsxs("div",{className:"flex justify-center items-center",children:[t.jsx("button",{onClick:()=>{c(!1),l(["","1","2","3","4","5","6","7","8"])},className:"m-5 bg-gray-400 rounded-lg p-2",children:t.jsx(y,{size:30})}),t.jsx("button",{onClick:()=>{u(),c(!1),l(["","1","2","3","4","5","6","7","8"])},className:"font-bold text-3xl bg-gray-400 rounded-lg p-2",children:"Exit"})]})]}),t.jsxs("div",{className:"flex justify-center items-center",children:[t.jsx("div",{className:`${d?"scale-0 opacity-0":"scale-100 opacity-100"} duration-300 
                   flex justify-start items-start size-[21rem] md:size-96 bg-white/60 top-[124px] right-1/2 translate-x-1/2 rounded-lg cursor-pointer absolute`,children:t.jsx("div",{onClick:()=>{k(),c(!0)},className:"flex justify-center items-center border-4 border-black size-28 md:size-32 rounded-lg group",children:t.jsx("p",{className:"group-hover:scale-110 duration-300 text-black",children:t.jsx(E,{size:70})})})}),t.jsx("p",{onClick:()=>{c(!1),l(["","1","2","3","4","5","6","7","8"])},className:"cursor-pointer absolute top-3 right-10 hover:-rotate-90 duration-300",children:t.jsx(y,{size:23})}),t.jsx("p",{onClick:()=>{u(),c(!1),l(["","1","2","3","4","5","6","7","8"])},className:"cursor-pointer absolute top-2 right-2 hover:rotate-90 duration-300",children:t.jsx(R,{size:30})})]})]})};export{P as default};
