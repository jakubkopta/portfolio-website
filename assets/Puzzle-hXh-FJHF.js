import{r,j as t,b as E,I as R}from"./index-mNbBbNAL.js";import{V as I}from"./index-7tfyD94O.js";const C=({isStarted:o,checkWinner:c,stoppedTime:i,setStoppedTime:n,highestScore:l,setHighestScore:j})=>{const[g,b]=r.useState(0),[_,d]=r.useState(!1),m=r.useRef(),p=u=>{const f=Math.floor(u/1e3),z=Math.floor(f/60),x=f%60,N=Math.floor(u%1e3/10);return`${z.toString().padStart(2,"0")}:${x.toString().padStart(2,"0")}:${N.toString().padStart(2,"0")}`};return r.useEffect(()=>{o&&!c?(()=>{if(!_){const x=Date.now()-g;m.current=window.setInterval(()=>{b(Date.now()-x)},10),d(!0)}})():o&&c?(()=>{d(!1),clearInterval(m.current),n(p(g)),(parseInt(l.replace(/:/g,""))===0||parseInt(i.replace(/:/g,""))<parseInt(l.replace(/:/g,"")))&&j(i)})():(()=>{clearInterval(m.current),b(0),d(!1)})()},[o,c,_,g,n,i,l,j]),t.jsx("div",{children:t.jsx("h1",{children:p(g)})})},P=({handlePlayClose:o,isDarkMode:c})=>{const[i,n]=r.useState(["","./images/puzzle/image_part_001.png","./images/puzzle/image_part_002.png","./images/puzzle/image_part_003.png","./images/puzzle/image_part_004.png","./images/puzzle/image_part_005.png","./images/puzzle/image_part_006.png","./images/puzzle/image_part_007.png","./images/puzzle/image_part_008.png"]),[l,j]=r.useState("0"),[g,b]=r.useState(l),[_,d]=r.useState(!1),[m,p]=r.useState(!1),u=[[1,3],[0,2,4],[1,5],[0,4,6],[1,3,5,7],[2,4,8],[3,7],[4,6,8],[5,7]],f=(e,a)=>{const s=[...i];return[s[e],s[a]]=[s[a],s[e]],s};function z(e){const a=e.split("/"),h=a[a.length-1].replace(/\D/g,"");return parseInt(h)}function x(e){return e.filter((a,s)=>a!==""&&z(a)!==s).length}function N(e){for(let a=0;a<e.length-1;a++)if(z(e[a])+1===z(e[a+1]))return!0;return!1}function y(e){const a=[...e];do for(let s=0;s<e.length;s++){const h=e.indexOf(""),S=u[h],w=S[Math.floor(Math.random()*S.length)];[e[h],e[w]]=[e[w],e[h]]}while(e.join()===["","./images/puzzle/image_part_001.png","./images/puzzle/image_part_002.png","./images/puzzle/image_part_003.png","./images/puzzle/image_part_004.png","./images/puzzle/image_part_005.png","./images/puzzle/image_part_006.png","./images/puzzle/image_part_007.png","./images/puzzle/image_part_008.png"].join()||e.join()===a.join()||x(e)<e.length/2||N(e));return e}const k=()=>{const e=y(i);n(e),p(!1),d(!_)},$=e=>{for(const a of u[e])i[a]===""&&n(f(e,a))},v=()=>{if(i.every((e,a)=>e===["","./images/puzzle/image_part_001.png","./images/puzzle/image_part_002.png","./images/puzzle/image_part_003.png","./images/puzzle/image_part_004.png","./images/puzzle/image_part_005.png","./images/puzzle/image_part_006.png","./images/puzzle/image_part_007.png","./images/puzzle/image_part_008.png"][a]))return!0};return r.useEffect(()=>{},[i,_]),t.jsxs("div",{className:`${c?"bg-dark-mode":"bg-gray-200"} shadow-2xl rounded-3xl m-1 mt-5 md:m-28 pb-10 relative`,children:[t.jsxs("div",{className:"flex flex-col justify-center items-center",children:[t.jsx("h1",{className:"text-4xl font-bold text-center m-5",children:"Puzzle"}),t.jsx(C,{isStarted:m,checkWinner:v(),stoppedTime:l,setStoppedTime:j,highestScore:g,setHighestScore:b})]}),t.jsxs("h2",{className:"absolute top-3 left-3 text-center",children:["Highest Score:",t.jsx("br",{}),g]}),t.jsx("div",{className:"flex justify-evenly items-center",children:t.jsx("div",{className:"grid grid-cols-3 m-5",children:i.map((e,a)=>t.jsx("div",{onClick:()=>$(a),className:"bg-gray-400 border-2 border-black h-28 md:h-32 w-28 md:w-32 rounded-xl cursor-pointer flex justify-center items-center overflow-hidden",children:t.jsx("div",{className:`transform ${e?"opacity-100":"opacity-0"} duration-300`,children:t.jsx("img",{src:e,alt:"puzzle piece"})})},a))})}),t.jsxs("div",{className:`${v()&&m?"scale-100 opacity-100":"scale-0 opacity-0"} duration-500 ${c?"bg-dark-mode/90":"bg-gray-200/90"} rounded-3xl flex flex-col justify-center items-center text-center absolute inset-0 z-[100]`,children:[t.jsx("span",{className:"text-6xl font-bold p-3",children:"Winner"}),"Your Time: ",l,t.jsx("br",{}),"Highest Score: ",g,t.jsxs("div",{className:"flex justify-center items-center",children:[t.jsx("button",{onClick:()=>{p(!1),n(["","./images/puzzle/image_part_001.png","./images/puzzle/image_part_002.png","./images/puzzle/image_part_003.png","./images/puzzle/image_part_004.png","./images/puzzle/image_part_005.png","./images/puzzle/image_part_006.png","./images/puzzle/image_part_007.png","./images/puzzle/image_part_008.png"])},className:"m-5 bg-gray-400 rounded-lg p-2",children:t.jsx(I,{size:30})}),t.jsx("button",{onClick:()=>{o(),p(!1),n(["","./images/puzzle/image_part_001.png","./images/puzzle/image_part_002.png","./images/puzzle/image_part_003.png","./images/puzzle/image_part_004.png","./images/puzzle/image_part_005.png","./images/puzzle/image_part_006.png","./images/puzzle/image_part_007.png","./images/puzzle/image_part_008.png"])},className:"font-bold text-3xl bg-gray-400 rounded-lg p-2",children:"Exit"})]})]}),t.jsxs("div",{className:"flex justify-center items-center",children:[t.jsx("div",{className:`${m?"scale-0 opacity-0":"scale-100 opacity-100"} duration-300 
                   flex justify-start items-start size-[21rem] md:size-96 bg-white/60 top-[124px] right-1/2 translate-x-1/2 rounded-xl cursor-pointer absolute`,children:t.jsx("div",{onClick:()=>{k(),p(!0)},className:"flex justify-center items-center border-4 border-black size-28 md:size-32 duration-300 rounded-xl group",children:t.jsx("p",{className:"group-hover:scale-110 text-black",children:t.jsx(E,{size:70})})})}),t.jsx("p",{onClick:()=>{p(!1),n(["","./images/puzzle/image_part_001.png","./images/puzzle/image_part_002.png","./images/puzzle/image_part_003.png","./images/puzzle/image_part_004.png","./images/puzzle/image_part_005.png","./images/puzzle/image_part_006.png","./images/puzzle/image_part_007.png","./images/puzzle/image_part_008.png"])},className:"cursor-pointer absolute top-3 right-10 hover:-rotate-90 duration-300",children:t.jsx(I,{size:23})}),t.jsx("p",{onClick:()=>{o(),p(!1),n(["","./images/puzzle/image_part_001.png","./images/puzzle/image_part_002.png","./images/puzzle/image_part_003.png","./images/puzzle/image_part_004.png","./images/puzzle/image_part_005.png","./images/puzzle/image_part_006.png","./images/puzzle/image_part_007.png","./images/puzzle/image_part_008.png"])},className:"cursor-pointer absolute top-2 right-2 hover:rotate-90 duration-300",children:t.jsx(R,{size:30})})]})]})};export{P as default};
