import{r as o,j as t,b as E,I as R}from"./index-52qRraC5.js";import{V as z}from"./index-pZlmPMC_.js";const C=({isStarted:u,checkWinner:f,stoppedTime:r,setStoppedTime:l,highestScore:a,setHighestScore:g})=>{const[i,b]=o.useState(0),[m,h]=o.useState(!1),d=o.useRef(),c=x=>{const p=Math.floor(x/1e3),N=Math.floor(p/60),j=p%60,v=Math.floor(x%1e3/10);return`${N.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`};return o.useEffect(()=>{u&&!f?(()=>{if(!m){const j=Date.now()-i;d.current=window.setInterval(()=>{b(Date.now()-j)},10),h(!0)}})():u&&f?(()=>{h(!1),clearInterval(d.current),l(c(i)),(parseInt(a.replace(/:/g,""))===0||parseInt(r.replace(/:/g,""))<parseInt(a.replace(/:/g,"")))&&g(r)})():(()=>{clearInterval(d.current),b(0),h(!1)})()},[u,f,m,i,l,r,a,g]),t.jsx("div",{children:t.jsx("h1",{children:c(i)})})},P=({handlePlayClose:u,isDarkMode:f})=>{const[r,l]=o.useState(["","1","2","3","4","5","6","7","8"]),[a,g]=o.useState("0"),[i,b]=o.useState(a),[m,h]=o.useState(!1),[d,c]=o.useState(!1),x=[[1,3],[0,2,4],[1,5],[0,4,6],[1,3,5,7],[2,4,8],[3,7],[4,6,8],[5,7]],p=(e,s)=>{const n=[...r];return[n[e],n[s]]=[n[s],n[e]],n};function N(e){return e.filter((s,n)=>s!==""&&parseInt(s)!==n).length}function j(e){for(let s=0;s<e.length-1;s++)if(parseInt(e[s])+1===parseInt(e[s+1]))return!0;return!1}function v(e){const s=[...e];do for(let n=0;n<e.length;n++){const S=e.indexOf(""),w=x[S],y=w[Math.floor(Math.random()*w.length)];[e[S],e[y]]=[e[y],e[S]]}while(e.join()===["","1","2","3","4","5","6","7","8"].join()||e.join()===s.join()||N(e)<e.length/2||j(e));return e}const k=()=>{const e=v(r);l(e),c(!1),h(!m)},$=e=>{for(const s of x[e])r[s]===""&&l(p(e,s))},I=()=>{if(r.every((e,s)=>e===["","1","2","3","4","5","6","7","8"][s]))return!0};return o.useEffect(()=>{},[r,m]),t.jsxs("div",{className:`${f?"bg-dark-mode":"bg-gray-200"} shadow-2xl rounded-3xl m-1 mt-5 md:m-28 pb-10 relative`,children:[t.jsxs("div",{className:"flex flex-col justify-center items-center",children:[t.jsx("h1",{className:"text-4xl font-bold text-center m-5",children:"Puzzle"}),t.jsx(C,{isStarted:d,checkWinner:I(),stoppedTime:a,setStoppedTime:g,highestScore:i,setHighestScore:b})]}),t.jsxs("h2",{className:"absolute top-3 left-3 text-center",children:["Highest Score:",t.jsx("br",{}),i]}),t.jsx("div",{className:"flex justify-evenly items-center",children:t.jsx("div",{className:"grid grid-cols-3 m-5",children:r.map((e,s)=>t.jsx("div",{onClick:()=>$(s),className:"bg-gray-400 border-2 border-black h-28 md:h-32 w-28 md:w-32 rounded-xl cursor-pointer flex justify-center items-center",children:t.jsx("span",{className:`transform ${e?"opacity-100":"opacity-0"} 
                                text-dark-mode
                                flex justify-center items-center
                                bg-gray-300 rounded-xl h-[90%] w-[90%] duration-300 text-2xl font-bold`,children:e})},s))})}),t.jsxs("div",{className:`${I()&&d?"scale-100 opacity-100":"scale-0 opacity-0"} duration-500 ${f?"bg-dark-mode/90":"bg-gray-200/90"} rounded-3xl flex flex-col justify-center items-center text-center absolute inset-0 z-[100]`,children:[t.jsx("span",{className:"text-6xl font-bold p-3",children:"Winner"}),"Your Time: ",a,t.jsx("br",{}),"Highest Score: ",i,t.jsxs("div",{className:"flex justify-center items-center",children:[t.jsx("button",{onClick:()=>{c(!1),l(["","1","2","3","4","5","6","7","8"])},className:"m-5 bg-gray-400 rounded-lg p-2",children:t.jsx(z,{size:30})}),t.jsx("button",{onClick:()=>{u(),c(!1),l(["","1","2","3","4","5","6","7","8"])},className:"font-bold text-3xl bg-gray-400 rounded-lg p-2",children:"Exit"})]})]}),t.jsxs("div",{className:"flex justify-center items-center",children:[t.jsx("div",{className:`${d?"scale-0 opacity-0":"scale-100 opacity-100"} duration-300 
                   flex justify-start items-start size-[21rem] md:size-96 bg-white/60 top-[124px] right-1/2 translate-x-1/2 rounded-xl cursor-pointer absolute`,children:t.jsx("div",{onClick:()=>{k(),c(!0)},className:"flex justify-center items-center border-4 border-black size-28 md:size-32 duration-300 rounded-xl group",children:t.jsx("p",{className:"group-hover:scale-110 text-black",children:t.jsx(E,{size:70})})})}),t.jsx("p",{onClick:()=>{c(!1),l(["","1","2","3","4","5","6","7","8"])},className:"cursor-pointer absolute top-3 right-10 hover:-rotate-90 duration-300",children:t.jsx(z,{size:23})}),t.jsx("p",{onClick:()=>{u(),c(!1),l(["","1","2","3","4","5","6","7","8"])},className:"cursor-pointer absolute top-2 right-2 hover:rotate-90 duration-300",children:t.jsx(R,{size:30})})]})]})};export{P as default};
